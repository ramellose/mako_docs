<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://ramellose.github.io/mako_docs/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://ramellose.github.io/mako_docs/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=https://ramellose.github.io/mako_docs/main.7d5dde65f55e446111e40ce60c3cf151a23c1cdeff01ae13eeb05eacdd3b62a10dcbb4142a213f97728fabc97c3a2c4ab7294bd829f06b4a046baa5baf0e1a8b.css integrity="sha512-fV3eZfVeRGER5AzmDDzxUaI8HN7/Aa4T7rBerN07YqENy7QUKiE/l3KPq8l8OixKtylL2Cnwa0oEa6pbrw4aiw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Food web schemas - mako</title><meta name=description content="Mako helps you structure data from multiple networks to carry out better meta-analyses. "><link rel=canonical href=https://ramellose.github.io/mako_docs/demo/pisaster/schemas/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/mako.png"><meta name=twitter:title content="Food web schemas"><meta name=twitter:description content="Neo4j does not enforce constraints, it is possible to store information in any way possible. The Neo4j introduction to graph database concepts provides some details on how this happens. To facilitate straightforward methods to access information, it can be helpful to come up with a set of rules for how data should be stored. By storing data according to a set of rules, it becomes easier to define general Cypher queries that can access the appropriate data."><meta name=twitter:site content="@rutjers"><meta name=twitter:creator content="@rutjers"><meta property="og:title" content="Food web schemas"><meta property="og:description" content="Neo4j does not enforce constraints, it is possible to store information in any way possible. The Neo4j introduction to graph database concepts provides some details on how this happens. To facilitate straightforward methods to access information, it can be helpful to come up with a set of rules for how data should be stored. By storing data according to a set of rules, it becomes easier to define general Cypher queries that can access the appropriate data."><meta property="og:type" content="article"><meta property="og:url" content="/demo/pisaster/schemas/"><meta property="og:image" content="/mako.png"><meta property="article:published_time" content="2021-04-21T09:54:03+02:00"><meta property="article:modified_time" content="2021-04-21T09:54:03+02:00"><meta property="og:site_name" content="mako"><meta property="article:publisher" content="https://www.facebook.com/rottjers.sam"><meta property="article:author" content="https://www.facebook.com/rottjers.sam"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/ramellose.github.io\/mako_docs"},{"@type":"ListItem","position":3,"name":"Demo","item":"https:\/\/ramellose.github.io\/mako_docs\/demo\/"},{"@type":"ListItem","position":4,"name":"Pisaster","item":"https:\/\/ramellose.github.io\/mako_docs\/demo\/pisaster\/"},{"@type":"ListItem","position":5,"name":"Schemas","item":"https:\/\/ramellose.github.io\/mako_docs\/demo\/pisaster\/schemas\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://ramellose.github.io/mako_docs/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ramellose.github.io/mako_docs/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://ramellose.github.io/mako_docs/favicon-16x16.png><link rel=manifest href=https://ramellose.github.io/mako_docs/site.webmanifest></head><body class="demo single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=https://ramellose.github.io/mako_docs/>mako</a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://twitter.com/rutjers><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><span class="ms-2 visually-hidden">Twitter</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/ramellose/mako><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/info/mako/abstract/>About</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/quickstart/guide>Quickstart</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/demo/vignette/intro>Demo</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/manual/introduction/intro>Manual</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/neo4j/introduction/intro>Neo4j</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/cypher/introduction/intro>Cypher</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/examples/intro>Cases</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/blog/>Blog</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Pisaster</h3><ul class=list-unstyled><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/pisaster/intro/>Paine's food web</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/pisaster/pisaster/>Predator-prey interactions</a></li><li><a class="docs-link active" href=https://ramellose.github.io/mako_docs/demo/pisaster/schemas/>Food web schemas</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/pisaster/connect/>Connect to Neo4j</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/pisaster/create/>Creating the food web</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/pisaster/query/>Querying the food web</a></li></ul><h3>mako</h3><ul class=list-unstyled><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/vignette/intro/>Demo data</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/vignette/access/>Set up database</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/vignette/biom/>Uploading BIOM file</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/vignette/networks/>Uploading networks</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/vignette/intersection/>Constructing intersection</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/vignette/metadata/>Calculate metadata correlations</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/vignette/taxonomy/>Merge network by taxonomy</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/vignette/cytoscape/>Export to Cytoscape</a></li></ul><h3>Custom queries</h3><ul class=list-unstyled><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/query/intro/>Working with Python scripts</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/query/setup/>Setting up the database</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/demo/query/custom/>Writing custom queries</a></li></ul></nav></div><main class="docs-content col-lg-11 col-xl-9"><h1>Food web schemas</h1><p class=lead></p><p>Neo4j does not enforce constraints, it is possible to store information in any way possible. The <a href=https://neo4j.com/docs/getting-started/current/graphdb-concepts/#graphdb-traversal>Neo4j introduction to graph database concepts</a> provides some details on how this happens. To facilitate straightforward methods to access information, it can be helpful to come up with a set of rules for how data should be stored. By storing data according to a set of rules, it becomes easier to define general Cypher queries that can access the appropriate data.</p><p>When deciding on how the data is stored, the result is usually a database schema. Schemas can be visualized as graphs, but they can also be described verbally as a set of rules or constraints. A database schema contains nodes (pieces of information) and relationships between these nodes. Nodes can have properties.
For example, if we want to make a node that represents <i>Pisaster</i>, we could choose to have a node with the label <b>Starfish</b>, a <b>Genus</b> property that says <i>Pisaster</i> and a <b>Species</b> property that says <i>ochraceus</i>.
However, for speed of access of databases it can matter a lot whether information is stored as a (node or relationship) label or as a separate node. This is because the Neo4j databasement management system (DBMS) uses graph traversal to return query results. Moreover, we should also keep in mind that Paine chose to keep his food web illustrations simple, so a single node represents an entire group of organisms.</p><p>If we were to define <i>Pisaster</i> as described above, a Cypher query to find all species belonging to the genus <i>Pisaster</i> would look like this:</p><code>MATCH (n:Organism {Genus: 'Pisaster'}) RETURN n</code><br><br><p>The DBMS needs to access the property Genus. For a simple query like this, the speed loss of accessing properties is not that large, but for complicated queries and larger databases, this can become important.
Therefore, if we have a large enough database that we might have several species of <i>Pisaster</i> and need to query by genera, it makes sense to add a separate node with <b>Genus</b> label.
The query to find all instances of <i>Pisaster</i> would then look more like this:</p><code>MATCH (n:Organism)--(:Genus {name: 'Pisaster'}) RETURN n</code><br><br><p>In addition to speed advantages, the Genus node only needs to exist once in the database and can then be connected to all other instances of <i>Pisaster</i>. Again, for small networks this is not a significant problem, but if we have a database with 100000 instances of the phylum Proteobacteria, we might start getting performance gains by storing Proteobacteria as a single separate node rather than a node property for each taxon, OTU or ASV.</p><p>For this example, two different database schemas could make sense for the <i>Pisaster</i> subweb (Figure 2). We could also include each organism as a Predator or Prey node, but that would not make a lot of sense for <i>Thais</i> sp., since these organisms are both predator and prey. However, many other variations are possible, all of which contain the exact same information but may have consequences for query speed and query complexity. One schema is not necessarily better than the other; rather, it depends on the needs to use this information. The fraction can be considered both a separate node and a property of the predator-prey relationship. Both options are fine and neither is expected to affect performance of this subweb, since accessing relationship properties is unlikely to take a prohibitively long time. For this demo, we will use the schema with fractions as relationship properties, to address how these can be used to query a network.</p><figure><img src=https://ramellose.github.io/mako_docs/images/schema.PNG alt="Schemas for storing a food web." width=600><figcaption>Figure 2: Schemas for storing a food web.</figcaption></figure><div class="docs-navigation d-flex justify-content-between"><a href=https://ramellose.github.io/mako_docs/demo/pisaster/pisaster/><div class="card my-1"><div class="card-body py-2">&larr; Predator-prey interactions</div></div></a><a class=ms-auto href=https://ramellose.github.io/mako_docs/demo/pisaster/connect/><div class="card my-1"><div class="card-body py-2">Connect to Neo4j &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://www.netlify.com/>Netlify</a>, <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=https://ramellose.github.io/mako_docs/js/highlight.min.2c793eb7599ae4975966407f455873eca25c0dd1146f2ba6a8ca933c3ee5a244f8e3a48c5b73694a76709db65ff3e7eedf2a55fc3b0c03510b2eca2b8635c8da.js integrity="sha512-LHk+t1ma5JdZZkB/RVhz7KJcDdEUbyumqMqTPD7lokT446SMW3NpSnZwnbZf8+fu3ypV/DsMA1ELLsorhjXI2g==" crossorigin=anonymous defer></script><script src=https://ramellose.github.io/mako_docs/main.min.7ab523108435955765bcb88a0ee704f412ba01646b5478e84f3b9feb24f0ce750a14c3f7bd9a62408fe21e41996d361a9eb29f77e85dfe77b7e17f7623bd3a97.js integrity="sha512-erUjEIQ1lVdlvLiKDucE9BK6AWRrVHjoTzuf6yTwznUKFMP3vZpiQI/iHkGZbTYanrKfd+hd/ne34X92I706lw==" crossorigin=anonymous defer></script><script src=https://ramellose.github.io/mako_docs/index.min.5e8c22dd194cfee3a044521843fbc27a255e6102168b12ed8809dfb1de332d15b617b4489a9094a3bf0e62a0ae1996ca723c804294ee709e0b5ff4feb645b8ee.js integrity="sha512-Xowi3RlM/uOgRFIYQ/vCeiVeYQIWixLtiAnfsd4zLRW2F7RImpCUo78OYqCuGZbKcjyAQpTucJ4LX/T+tkW47g==" crossorigin=anonymous defer></script></body></html>