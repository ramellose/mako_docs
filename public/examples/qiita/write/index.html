<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://ramellose.github.io/mako_docs/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://ramellose.github.io/mako_docs/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=https://ramellose.github.io/mako_docs/main.7d5dde65f55e446111e40ce60c3cf151a23c1cdeff01ae13eeb05eacdd3b62a10dcbb4142a213f97728fabc97c3a2c4ab7294bd829f06b4a046baa5baf0e1a8b.css integrity="sha512-fV3eZfVeRGER5AzmDDzxUaI8HN7/Aa4T7rBerN07YqENy7QUKiE/l3KPq8l8OixKtylL2Cnwa0oEa6pbrw4aiw==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Neo4j dump file - mako</title><meta name=description content="Mako helps you structure data from multiple networks to carry out better meta-analyses. "><link rel=canonical href=https://ramellose.github.io/mako_docs/examples/qiita/write/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/mako.png"><meta name=twitter:title content="Neo4j dump file"><meta name=twitter:description content="First, download the mako.dump file from the mako releases page. At the time of writing, the last release of a dump file can be found here: release 0.2.1. This file was created by uploading 60 BIOM files and network files to the Neo4j database and then using neo4j-admin to create a dump file. Such a file is much faster to restore a complete database.
ðŸ‘‰Save the mako.dump file in a folder named data."><meta name=twitter:site content="@rutjers"><meta name=twitter:creator content="@rutjers"><meta property="og:title" content="Neo4j dump file"><meta property="og:description" content="First, download the mako.dump file from the mako releases page. At the time of writing, the last release of a dump file can be found here: release 0.2.1. This file was created by uploading 60 BIOM files and network files to the Neo4j database and then using neo4j-admin to create a dump file. Such a file is much faster to restore a complete database.
ðŸ‘‰Save the mako.dump file in a folder named data."><meta property="og:type" content="article"><meta property="og:url" content="/examples/qiita/write/"><meta property="og:image" content="/mako.png"><meta property="article:published_time" content="2021-04-21T16:31:20+02:00"><meta property="article:modified_time" content="2021-04-21T16:31:20+02:00"><meta property="og:site_name" content="mako"><meta property="article:publisher" content="https://www.facebook.com/rottjers.sam"><meta property="article:author" content="https://www.facebook.com/rottjers.sam"><meta property="og:locale" content="en_US"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https:\/\/ramellose.github.io\/mako_docs"},{"@type":"ListItem","position":3,"name":"Examples","item":"https:\/\/ramellose.github.io\/mako_docs\/examples\/"},{"@type":"ListItem","position":4,"name":"Qiita","item":"https:\/\/ramellose.github.io\/mako_docs\/examples\/qiita\/"},{"@type":"ListItem","position":5,"name":"Write","item":"https:\/\/ramellose.github.io\/mako_docs\/examples\/qiita\/write\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://ramellose.github.io/mako_docs/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://ramellose.github.io/mako_docs/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://ramellose.github.io/mako_docs/favicon-16x16.png><link rel=manifest href=https://ramellose.github.io/mako_docs/site.webmanifest></head><body class="examples single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 me-auto" href=https://ramellose.github.io/mako_docs/>mako</a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://twitter.com/rutjers><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter"><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg><span class="ms-2 visually-hidden">Twitter</span></a></li><li class=nav-item><a class=nav-link href=https://github.com/ramellose/mako><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ms-2 visually-hidden">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav me-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/info/mako/abstract/>About</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/quickstart/guide>Quickstart</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/demo/vignette/intro>Demo</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/manual/introduction/intro>Manual</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/neo4j/introduction/intro>Neo4j</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/cypher/introduction/intro>Cypher</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/examples/intro>Cases</a></li><li class=nav-item><a class=nav-link href=https://ramellose.github.io/mako_docs/blog/>Blog</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Search docs..." aria-label="Search docs..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>Case studies</h3><ul class=list-unstyled><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/intro/>Overview</a></li></ul><h3>Sponges</h3><ul class=list-unstyled><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/sponges/intro/>HMA-LMA status</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/sponges/setup/>Sponge networks</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/sponges/queries/>Finding HMA-LMA subgraphs</a></li></ul><h3>IBD</h3><ul class=list-unstyled><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/ibd/intro/>Inflammatory bowel disease</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/ibd/associations/>Microbe-metabolite links</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/ibd/setup/>Populating the database</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/ibd/data/>Querying IBD data</a></li></ul><h3>Validation</h3><ul class=list-unstyled><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/metalit/intro/>A literature-curated network</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/metalit/corrs/>Association network</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/metalit/setup/>Importing the literature network</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/metalit/queries/>Associations linked to literature-validated interactions</a></li></ul><h3>Qiita</h3><ul class=list-unstyled><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/qiita/intro/>Introduction</a></li><li><a class="docs-link active" href=https://ramellose.github.io/mako_docs/examples/qiita/write/>Neo4j dump file</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/qiita/ocean/>Code Ocean</a></li></ul><h3>Motifs</h3><ul class=list-unstyled><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/motifs/intro/>Network motifs</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/motifs/python_funcs/>Functions</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/motifs/queries/>Queries</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/motifs/plot/>Making a barplot</a></li></ul><h3>Propionate</h3><ul class=list-unstyled><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/propionate/intro/>Short chain fatty acids</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/propionate/queries/>Finding genera</a></li><li><a class=docs-link href=https://ramellose.github.io/mako_docs/examples/propionate/plot/>Making an Upset plot</a></li></ul></nav></div><main class="docs-content col-lg-11 col-xl-9"><h1>Neo4j dump file</h1><p class=lead></p><p>First, download the mako.dump file from <a href=https://github.com/ramellose/mako/releases>the mako releases page</a>. At the time of writing, the last release of a dump file can be found here: <a href=https://github.com/ramellose/mako/releases/tag/v0.2.1>release 0.2.1</a>. This file was created by uploading 60 BIOM files and network files to the Neo4j database and then using neo4j-admin to create a dump file. Such a file is much faster to restore a complete database.</p><div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon">ðŸ‘‰</div><div class=w-100>Save the mako.dump file in a folder named data. Run the Docker container from the folder <b>containing</b> the data folder.</div></div><figure><img src=https://ramellose.github.io/mako_docs/images/filepath.PNG alt="Screenshot with mako.dump file location." width=600><figcaption>Figure 1: Screenshot with mako.dump file location.</figcaption></figure><p>The dump file can be written both to a local Neo4j database, and to a Docker file. The former is a bit simpler, but requires you to download the exact Neo4j version used to generate the dump file.</p><p>Keep in mind that you need to use a Neo4j version equal to the version that the database was created in, in this case 4.2.0. With the Docker command, you will automatically download and start the correct version. Otherwise, you can select the button in the left bottom corner of the Neo4j Browser to see which version you are running.</p><div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon">ðŸ‘‰</div><div class=w-100>When you change Neo4j versions, the browser cache may cause you to load an older version of the Neo4j Browser. Make sure to clear your cache in between switching versions. The exact steps for clearing your browser cache vary per browser.</div></div><h5>Writing the dump file to a local Neo4j database</h5>If you have a running local instance of Neo4j, you can simply use the command below from the neo4j folder. Make sure to adapt the --from file path to the file path where you have saved the mako.dump file.<br><br><code>bin/neo4j-admin load --from=/data/mako.dump --database=neo4j --force</code><h5>Uploading dump file to a Docker container</h5>To upload the database, a Docker container needs to be initialized and bound to a local volume. This requires some extra steps to mount the volume and save the dump file there.
When you call the Neo4j Docker, do not forget to specify the version name; specifying the wrong version may lead to the database loading incorrectly.<p>If you still have a Docker container with the same name running, stop this container first:</p><code>docker stop neo4j</code><br><br><p>Otherwise, use the command below to mount a folder named data and shut down the container after starting it. Make sure the data path matches the path to your dump file, so navigate to this location if applicable!</p><div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon">ðŸ‘‰</div><div class=w-100>The Docker commands below are given as multi-line commands for clarity, but please use the single-line commands for copy-pasting.</div></div><p>For Windows:<br></p><pre><code>
docker run -d -v 
           ./data:/data 
           --publish=7475:7474 
           --publish=7688:7687 
           --name=neo4j 
           --env NEO4J_AUTH=neo4j/test 
           neo4j:4.2.0
</code></pre><pre><code>
docker run -d -v ./data:/data --publish=7475:7474 --publish=7688:7687 --name=neo4j --env NEO4J_AUTH=neo4j/test neo4j:4.2.0
</code></pre><p>For Linux and MacOS:<br></p><pre><code>
docker run -d -v 
           data:/data 
           --publish=7475:7474 
           --publish=7688:7687 
           --name=neo4j 
           --env NEO4J_AUTH=neo4j/test 
           neo4j:4.2.0
</code></pre><pre><code>
docker run -d -v data:/data --publish=7475:7474 --publish=7688:7687 --name=neo4j --env NEO4J_AUTH=neo4j/test neo4j:4.2.0
</code></pre><p>Shut down the container:</p><pre><code>
docker stop neo4j
</code></pre><p>Next, the mako.dump file is copied from the data folder to Neo4j container. This may give a warning about permissions and the folder not being writable, but the warning should not affect the Docker container.</p><p>For Windows:<br><code>docker cp ./data/mako.dump neo4j:/data/mako.dump</code></p><p>For Linux and MacOS:<br><code>docker cp data/mako.dump neo4j:/data/mako.dump</code></p><p>Then we restart the Neo4j docker, but append the script so that a bash shell is opened.</p><p>For Windows:</p><pre><code>
docker run -i -v 
           ./data:/data 
           --publish=7475:7474 
           --publish=7688:7687
           -t neo4j 
           /bin/bash
</code></pre><pre><code>
docker run -i -v ./data:/data --publish=7475:7474 --publish=7688:7687 -t neo4j /bin/bash
</code></pre><p>For Linux and MacOS:</p><pre><code>
docker run -i -v 
           data:/data 
           --publish=7475:7474 
           --publish=7688:7687 
           -t neo4j 
           /bin/bash
</code></pre><pre><code>
docker run -i -v data:/data --publish=7475:7474 --publish=7688:7687 -t neo4j /bin/bash
</code></pre><p>From the bash shell, we call the neo4j-admin script and use it to restore the neo4j database from the mako.dump file.</p><code>bin/neo4j-admin load --from=/data/mako.dump --database=neo4j --force<br>exit</code><br><br>To measure the amount of time it takes to run the script, you can also call the below command instead.<br><br><code>%SECONDS=0 ; bin/neo4j-admin load --from=/data/mako.dump --database=neo4j --force ; echo $SECONDS</code><br><br>Finally, we can restart the Docker container. Give it a minute or two to restore the database; afterwards, you should be able to interact with it via the Neo4j Browser at <a href=http://localhost:7475/browser/>http://localhost:7475/browser/</a>. Set the address to <code>localhost:7688</code>, the username to <code>neo4j</code> and the password to <code>test</code> to connect.<div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon">ðŸ‘‰</div><div class=w-100>If the Neo4j Browser returns a blank webpage, please clear your browser cache; this can happen when switching between Neo4j versions.</div></div><p><br><br><code>docker start neo4j</code><br><br>To remove the container, use the following command:<br><br><code>docker container rm neo4j</code><br><br>In a Unix environment, the complete sequence to start the database should look something like below:</p><figure><img src=https://ramellose.github.io/mako_docs/images/commands_ubuntu.PNG alt="Screenshot of commands to restore mako dump." width=600><figcaption>Figure 2: Screenshot of commands to restore mako dump.</figcaption></figure><div class="docs-navigation d-flex justify-content-between"><a href=https://ramellose.github.io/mako_docs/examples/qiita/intro/><div class="card my-1"><div class="card-body py-2">&larr; Introduction</div></div></a><a class=ms-auto href=https://ramellose.github.io/mako_docs/examples/qiita/ocean/><div class="card my-1"><div class="card-body py-2">Code Ocean &rarr;</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Powered by <a href=https://www.netlify.com/>Netlify</a>, <a href=https://gohugo.io/>Hugo</a>, and <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-end"><ul class=list-inline></ul></div></div></div></footer><script src=https://ramellose.github.io/mako_docs/js/highlight.min.2c793eb7599ae4975966407f455873eca25c0dd1146f2ba6a8ca933c3ee5a244f8e3a48c5b73694a76709db65ff3e7eedf2a55fc3b0c03510b2eca2b8635c8da.js integrity="sha512-LHk+t1ma5JdZZkB/RVhz7KJcDdEUbyumqMqTPD7lokT446SMW3NpSnZwnbZf8+fu3ypV/DsMA1ELLsorhjXI2g==" crossorigin=anonymous defer></script><script src=https://ramellose.github.io/mako_docs/main.min.7ab523108435955765bcb88a0ee704f412ba01646b5478e84f3b9feb24f0ce750a14c3f7bd9a62408fe21e41996d361a9eb29f77e85dfe77b7e17f7623bd3a97.js integrity="sha512-erUjEIQ1lVdlvLiKDucE9BK6AWRrVHjoTzuf6yTwznUKFMP3vZpiQI/iHkGZbTYanrKfd+hd/ne34X92I706lw==" crossorigin=anonymous defer></script><script src=https://ramellose.github.io/mako_docs/index.min.5e8c22dd194cfee3a044521843fbc27a255e6102168b12ed8809dfb1de332d15b617b4489a9094a3bf0e62a0ae1996ca723c804294ee709e0b5ff4feb645b8ee.js integrity="sha512-Xowi3RlM/uOgRFIYQ/vCeiVeYQIWixLtiAnfsd4zLRW2F7RImpCUo78OYqCuGZbKcjyAQpTucJ4LX/T+tkW47g==" crossorigin=anonymous defer></script></body></html>